---
description: JSDoc style guide for Helvety codebase
globs: ["**/*.ts", "**/*.tsx"]
---

# JSDoc Style Guide

When writing JSDoc comments for this codebase:

1. **Required for**: Functions, classes, interfaces, type aliases
2. **Not required for**: Methods, constructors
3. **Preferred content**: Description only
4. **Rationale**: TypeScript provides type information; JSDoc is for human-readable descriptions

## Preferred Style (Simple Functions)

For simple functions with 1-2 parameters and obvious behavior, use description only:

```typescript
/**
 * Encrypts data using AES-256-GCM with the provided key.
 * Returns encrypted data with IV and ciphertext for storage.
 */
export async function encrypt(data: string, key: CryptoKey): Promise<EncryptedData>
```

## When @param/@returns Are Allowed

Use @param and @returns tags for:

- **Complex functions** (3+ parameters or non-obvious behavior)
- **Server actions** (app/actions/*.ts) - for clarity on form data handling
- **Security-sensitive functions** - where parameter constraints matter
- **Functions with object parameters** - to document expected properties

```typescript
/**
 * Registers a new passkey credential for the user.
 *
 * @param userId - The authenticated user's ID
 * @param credential - WebAuthn credential from browser
 * @param challenge - The original registration challenge
 * @returns The stored credential record or error
 */
export async function registerPasskey(
  userId: string,
  credential: RegistrationCredential,
  challenge: string
): Promise<ActionResponse<UserAuthCredential>>
```

## Avoid

- Empty JSDoc blocks: `/** */`
- Redundant descriptions that just repeat the function name
- @param tags that add no value beyond the type: `@param data - The data`

## Keep Descriptions Meaningful

Good: "Validates redirect URLs against allowed origins to prevent open redirect attacks"
Bad: "Validates the redirect URL"
